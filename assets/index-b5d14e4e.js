function __vite_legacy_guard(){import.meta.url,import("_").catch((()=>1))}import{i as index,W as We,D as Declarative,c as createTheme,r as reactExports,a as rS,j as jsxRuntimeExports,T as Typography,F as Ft,M as MonacoJsxSyntaxHighlight,g as getWorker,u as uk,p as pc,l as lx,B as Box,b as babelExports,d as default_1,x as xa,H as Hg,e as i0,f as fD,h as Th,k as uI,K as Ks,L as LZ,C as CssBaseline,m as LinearProgress,S as Split,n as createCache,o as createRoot,q as Sa,s as pd,t as CacheProvider,v as TssCacheProvider,w as ThemeProvider,y as LocalizationProvider,A as AdapterDayjs,E as EZ}from"./vendor-1ef286af.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),window.ResizeObserver||(window.ResizeObserver=index),window.React=We,window.Declarative=Declarative;const THEME_DARK=createTheme({breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}},palette:{mode:"dark",primary:{main:"#3F51B5"},secondary:{main:"#F5F8FF"},success:{dark:"#2F6b39",light:"#5fc16d",main:"#38b249"},warning:{dark:"#8D682d",light:"#f7bb57",main:"#f6ab2e"},info:{dark:"#1D4580",light:"#4483df",main:"#1664d8"},error:{dark:"#85372b",light:"#eb6d57",main:"#e6492d"},text:{primary:"#fff",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},background:{default:"#111318",paper:"#1d1f24"}}}),fetchText=async e=>{const t=await fetch(e);return await t.text()},codeManager=uk("react-declarative-playground-code"),Editor=({onChange:e})=>{const t=reactExports.useRef(null),[r]=rS((async()=>{const[e,t]=await Promise.all([fetchText("react-declarative.d.ts"),fetchText("code.txt")]);return{types:e,code:codeManager.getValue()||t}}));return r?jsxRuntimeExports.jsx(Ft,{height:"100vh",defaultLanguage:"typescript",theme:"vs-dark",defaultValue:r.code,onMount:(s,a)=>{const o=new MonacoJsxSyntaxHighlight(getWorker(),a),{highlighter:n}=o.highlighterBuilder({editor:s});n(),a.languages.typescript.typescriptDefaults.setCompilerOptions({jsx:a.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",reactNamespace:"React",target:a.languages.typescript.ScriptTarget.ES2020}),a.languages.typescript.typescriptDefaults.addExtraLib(r.types,"file:///node_modules/react-declarative/index.d.ts"),t.current=()=>s.getValue(),e(s.getValue())},onChange:()=>{const r=t.current();codeManager.setValue(r),e(r)}}):jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading editor..."})},[LoaderProvider,useLoaderInternal]=pc(),useLoader=()=>{const[e,t]=useLoaderInternal();return[!!e,reactExports.useCallback((e=>t((t=>t+(e?1:-1)))),[])]},EditorWrapper=()=>{const{elementRef:e,size:t}=lx(),r=reactExports.useMemo((()=>{const e=new URL(location.href,location.origin);return e.searchParams.set("monaco","1"),e.toString()}),[]);return jsxRuntimeExports.jsx(Box,{ref:e,children:jsxRuntimeExports.jsx(Box,{component:"iframe",sx:{height:"100vh",width:t.width},src:r})})};babelExports.registerPlugin("plugin-transform-modules-umd",default_1);const Preview=({onNotify:onNotify})=>{const transpileSubject=xa(),handleTranspile=reactExports.useMemo((()=>Hg((value=>{let code=null;console.log("Compiling",new Date);try{const e=babelExports.transform(value,{filename:"index.tsx",presets:["env","react","typescript"],plugins:[["plugin-transform-modules-umd",{globals:{react:"React","react-declarative":"Declarative"},moduleId:"Executor"}]],parserOpts:{strictMode:!1}});code=e.code}catch(error){return void onNotify(i0(error)||"Invalid syntax")}if(code){try{eval(code)}catch(error){return void onNotify(i0(error)||"Execution failed")}console.log("Compiled",new Date),transpileSubject.next()}else onNotify("Empty code")}),2500)),[]);return reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{"code-action"===e.type&&e.code&&handleTranspile(e.code)}))}),[handleTranspile]),jsxRuntimeExports.jsx(fD,{sx:{height:"100vh",width:"100vw"},hideOverflowX:!0,children:jsxRuntimeExports.jsx(Th,{reloadSubject:transpileSubject,onError:e=>onNotify(i0(e)||"Execution failed"),children:jsxRuntimeExports.jsx(uI,{reloadSubject:transpileSubject,children:()=>window.Executor?jsxRuntimeExports.jsx(Ks,{fields:window.Executor.fields,onChange:(e,t)=>!t&&onNotify(JSON.stringify(e,null,2)),sx:{p:1},payload:window.Executor.payload}):jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading preview..."})})})})},PreviewWrapper=({onRef:e})=>{const{elementRef:t,size:r}=lx(),s=reactExports.useMemo((()=>{const e=new URL(location.href,location.origin);return e.searchParams.set("preview","1"),e.toString()}),[]);return jsxRuntimeExports.jsx(Box,{ref:t,children:jsxRuntimeExports.jsx(Box,{ref:e,component:"iframe",sx:{height:"100vh",width:r.width},src:s})})},App=()=>{const[e]=useLoader(),t=LZ(),r=reactExports.useRef(null);reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{var s,a;"code-action"===e.type&&e.code&&(null==(a=null==(s=r.current)?void 0:s.contentWindow)||a.postMessage({type:e.type,code:e.code})),"notify-action"===e.type&&e.notify&&t(e.notify)}))}),[]);const s=reactExports.useMemo((()=>new URL(location.href,location.origin).searchParams.has("monaco")),[]),a=reactExports.useMemo((()=>new URL(location.href,location.origin).searchParams.has("preview")),[]);return s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Editor,{onChange:e=>{var t;null==(t=window.top)||t.postMessage({type:"code-action",code:e},"*")}})]}):a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Preview,{onNotify:e=>{var t;null==(t=window.top)||t.postMessage({type:"notify-action",notify:e},"*")}})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),e&&jsxRuntimeExports.jsx(LinearProgress,{sx:{position:"fixed",top:0,left:0,width:"100%"}}),jsxRuntimeExports.jsxs(Split,{children:[jsxRuntimeExports.jsx(EditorWrapper,{}),jsxRuntimeExports.jsx(PreviewWrapper,{onRef:e=>{r.current=e}})]})]})};"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw-cache.js");const container=document.getElementById("root"),muiCache=createCache({key:"mui",prepend:!0}),tssCache=createCache({key:"tss"}),wrappedApp=jsxRuntimeExports.jsx(CacheProvider,{value:muiCache,children:jsxRuntimeExports.jsx(TssCacheProvider,{value:tssCache,children:jsxRuntimeExports.jsx(ThemeProvider,{theme:THEME_DARK,children:jsxRuntimeExports.jsx(LocalizationProvider,{dateAdapter:AdapterDayjs,adapterLocale:"en-gb",children:jsxRuntimeExports.jsx(LoaderProvider,{initialState:0,children:jsxRuntimeExports.jsx(EZ,{children:jsxRuntimeExports.jsx(App,{})})})})})})}),root=createRoot(container);Sa.setValue({WITH_DIRTY_CLICK_LISTENER:!0,WITH_MOBILE_READONLY_FALLBACK:!0,WITH_WAIT_FOR_MOVE_LISTENER:!0,WITH_WAIT_FOR_TOUCH_LISTENER:!0,WITH_DISMOUNT_LISTENER:!0,WITH_SYNC_COMPUTE:!0,CUSTOM_FIELD_DEBOUNCE:800,FIELD_BLUR_DEBOUNCE:50}),pd.setAdjustHeight(25),document.addEventListener("wheel",(()=>{const e=document.activeElement;e&&"number"===e.type&&e.blur()})),root.render(wrappedApp);export{__vite_legacy_guard};
