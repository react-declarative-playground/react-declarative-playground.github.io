function __vite_legacy_guard(){import.meta.url,import("_").catch((()=>1))}import{i as index,W as We,D as Declarative,M as MuiMaterial,a as MuiIcons,c as createTheme,r as reactExports,b as rS,j as jsxRuntimeExports,T as Typography,F as Ft,u as uk,p as pc,l as lx,B as Box,d as babelExports,e as default_1,x as xa,H as Hg,f as i0,g as fD,h as Th,k as uI,K as Ks,A as AppBar,m as Toolbar,n as Button,o as eS,C as C0,q as KeyboardArrowDown,I as IconButton,s as Hm,G as GitHub,P as Popover,t as MenuItem,L as LZ,v as v0,w as ws,Q as Qpe,y as rde,z as CssBaseline,E as LinearProgress,S as Split,J as createCache,N as createRoot,O as Sa,R as pd,U as CacheProvider,V as TssCacheProvider,X as ThemeProvider,Y as LocalizationProvider,Z as AdapterDayjs,_ as EZ,$ as Zw}from"./vendor-a99b8048.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),window.ResizeObserver||(window.ResizeObserver=index),window.React=We,window.Declarative=Declarative,window.MuiMaterial=MuiMaterial,window.MuiIcons=MuiIcons,window.material=MuiMaterial,window.iconsMaterial=MuiIcons;const THEME_DARK=createTheme({breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}},palette:{mode:"dark",primary:{main:"#3F51B5"},secondary:{main:"#F5F8FF"},success:{dark:"#2F6b39",light:"#5fc16d",main:"#38b249"},warning:{dark:"#8D682d",light:"#f7bb57",main:"#f6ab2e"},info:{dark:"#1D4580",light:"#4483df",main:"#1664d8"},error:{dark:"#85372b",light:"#eb6d57",main:"#e6492d"},text:{primary:"#fff",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},background:{default:"#111318",paper:"#1d1f24"}}}),fetchText$1=async e=>{const t=await fetch(e);return await t.text()},codeManager=uk("react-declarative-playground-code"),Editor=({onChange:e})=>{const t=reactExports.useRef(null),r=reactExports.useRef(null);reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{"code-action"===e.type&&e.code&&r.current(e.code)}))}),[]);const[s]=rS((async()=>{const[e,t,r,s,a]=await Promise.all([fetchText$1("react-declarative.d.ts"),fetchText$1("react.d.ts"),fetchText$1("mui-material.d.ts"),fetchText$1("mui-icons.d.ts"),fetchText$1("code1.txt")]);return{types:e,code:codeManager.getValue()||a,react:t,mui:r,icons:s}}));return s?jsxRuntimeExports.jsx(Ft,{height:"100vh",defaultLanguage:"typescript",theme:"vs-dark",onMount:(a,o)=>{o.languages.typescript.typescriptDefaults.setCompilerOptions({...o.languages.typescript.typescriptDefaults.getCompilerOptions(),jsx:o.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",reactNamespace:"React",target:o.languages.typescript.ScriptTarget.ES2020});const n=o.editor.createModel(s.code,"typescript",o.Uri.file("index.tsx"));a.setModel(n),o.languages.typescript.typescriptDefaults.addExtraLib(s.types,"file:///node_modules/react-declarative/index.d.ts"),o.languages.typescript.typescriptDefaults.addExtraLib(s.react,"file:///node_modules/react/index.d.ts"),o.languages.typescript.typescriptDefaults.addExtraLib(s.mui,"file:///node_modules/@mui/material/index.d.ts"),o.languages.typescript.typescriptDefaults.addExtraLib(s.icons,"file:///node_modules/@mui/icons-material/index.d.ts"),t.current=()=>a.getValue(),r.current=e=>a.setValue(e),e(a.getValue())},onChange:()=>{const r=t.current();codeManager.setValue(r),e(r)}}):jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading editor..."})},[LoaderProvider,useLoaderInternal]=pc(),useLoader=()=>{const[e,t]=useLoaderInternal();return[!!e,reactExports.useCallback((e=>t((t=>t+(e?1:-1)))),[])]},CC_HEADER_HEIGHT=50,EditorWrapper=({onRef:e})=>{const{elementRef:t,size:r}=lx(),s=reactExports.useMemo((()=>{const e=new URL(location.href,location.origin);return e.searchParams.set("monaco","1"),e.toString()}),[]);return jsxRuntimeExports.jsx(Box,{ref:t,children:jsxRuntimeExports.jsx(Box,{ref:e,component:"iframe",frameBorder:"0",sx:{height:"calc(100vh - ".concat(CC_HEADER_HEIGHT,"px)"),width:r.width},src:s})})};babelExports.registerPlugin("plugin-transform-modules-umd",default_1);const Preview=({onNotify:onNotify})=>{const transpileSubject=xa(),handleTranspile=reactExports.useMemo((()=>Hg((value=>{let code=null;console.log("Compiling",new Date);try{const e=babelExports.transform(value,{filename:"index.tsx",presets:["env","react","typescript"],plugins:[["plugin-transform-modules-umd",{globals:{react:"React","react-declarative":"Declarative","@mui/material":"MuiMaterial","@mui/icons-material":"MuiIcons"},moduleId:"Executor"}]],parserOpts:{strictMode:!1}});code=e.code}catch(error){return void onNotify(i0(error)||"Invalid syntax")}if(code){try{eval(code)}catch(error){return void onNotify(i0(error)||"Execution failed")}console.log("Compiled",new Date),transpileSubject.next()}else onNotify("Empty code")}),2500)),[]);return reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{"code-action"===e.type&&e.code&&handleTranspile(e.code)}))}),[handleTranspile]),jsxRuntimeExports.jsx(fD,{sx:{height:"100vh",width:"100vw"},hideOverflowX:!0,children:jsxRuntimeExports.jsx(Th,{reloadSubject:transpileSubject,onError:e=>onNotify(i0(e)||"Execution failed"),children:jsxRuntimeExports.jsx(uI,{reloadSubject:transpileSubject,children:()=>window.Executor?jsxRuntimeExports.jsx(Ks,{fields:window.Executor.fields,data:window.Executor.data,onChange:(e,t)=>!t&&onNotify(JSON.stringify(e,null,2)),sx:{p:1},payload:window.Executor.payload}):jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading preview..."})})})})},PreviewWrapper=({onRef:e})=>{const{elementRef:t,size:r}=lx(),s=reactExports.useMemo((()=>{const e=new URL(location.href,location.origin);return e.searchParams.set("preview","1"),e.toString()}),[]);return jsxRuntimeExports.jsx(Box,{ref:t,children:jsxRuntimeExports.jsx(Box,{ref:e,component:"iframe",frameBorder:"0",sx:{height:"calc(100vh - ".concat(CC_HEADER_HEIGHT,"px)"),width:r.width},src:s})})},fetchText=async e=>{const t=await fetch(e);return await t.text()},itemList=[{url:"code1.txt",label:"Order info"},{url:"code2.txt",label:"Typography"},{url:"code3.txt",label:"Settings page"},{url:"code4.txt",label:"Product Shape"},{url:"code5.txt",label:"Profile card"},{url:"code6.txt",label:"Gallery of controls"}],Header=({onCode:e})=>{const[t,r]=reactExports.useState(null),s=reactExports.useRef("");reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{"code-action"===e.type&&e.code&&(s.current=e.code)}))}),[]);return jsxRuntimeExports.jsx(AppBar,{position:"relative",sx:{marginBottom:"2px"},children:jsxRuntimeExports.jsxs(Toolbar,{variant:"dense",sx:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",children:"Playground"}),jsxRuntimeExports.jsx(Button,{size:"small",sx:{color:"#fff",ml:2},onClick:async()=>{const t=await eS(".ts");if(!t)return;const r=new FileReader;r.addEventListener("load",(()=>{e(r.result)}),!1),t&&r.readAsText(t)},children:"Open"}),jsxRuntimeExports.jsx(Button,{size:"small",sx:{color:"#fff",ml:1},onClick:()=>{const e=new Blob([s.current]),t=URL.createObjectURL(e);C0(t,"form.assets.ts")},children:"Download"}),jsxRuntimeExports.jsx(Button,{size:"small",endIcon:jsxRuntimeExports.jsx(KeyboardArrowDown,{}),sx:{color:"#fff",ml:1,display:{xs:"none",sm:"flex"}},onClick:({currentTarget:e})=>r(e),children:"Demos"}),jsxRuntimeExports.jsx(Popover,{open:!!t,anchorEl:t,onClose:()=>r(null),anchorOrigin:{horizontal:"left",vertical:"bottom"},children:itemList.map((({label:t,url:s})=>jsxRuntimeExports.jsx(MenuItem,{onClick:async()=>{const t=await fetchText(s);e(t),r(null)},children:t},s)))}),jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx(IconButton,{onClick:()=>Hm("https://github.com/react-declarative/react-declarative"),children:jsxRuntimeExports.jsx(GitHub,{})})]})})},isDevelopment=()=>"development"==={}.CC_NODE_ENV,App=()=>{const[e]=useLoader(),t=LZ(),r=v0({title:"Waiting for user input",fields:[{type:ws.Text,title:"Firstname",defaultValue:"Петр",name:"f"},{type:ws.Text,title:"Lastname",name:"l"},{type:ws.Text,title:"Patronymic",name:"p"}]}),s=Qpe(),a=rde();reactExports.useEffect((()=>{window.pickOne=r,window.pickDate=s,window.pickTime=a}),[]);const o=reactExports.useRef(null),n=reactExports.useRef(null);reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{var r,s;"code-action"===e.type&&e.code&&(null==(s=null==(r=o.current)?void 0:r.contentWindow)||s.postMessage({type:e.type,code:e.code})),"notify-action"===e.type&&e.notify&&isDevelopment()&&t(e.notify)}))}),[]);const i=reactExports.useMemo((()=>new URL(location.href,location.origin).searchParams.has("monaco")),[]),c=reactExports.useMemo((()=>new URL(location.href,location.origin).searchParams.has("preview")),[]);return i?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Editor,{onChange:e=>{var t;null==(t=window.top)||t.postMessage({type:"code-action",code:e},"*")}})]}):c?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Preview,{onNotify:e=>{var t;null==(t=window.top)||t.postMessage({type:"notify-action",notify:e},"*")}})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Header,{onCode:e=>{var t,r,s,a;null==(r=null==(t=o.current)?void 0:t.contentWindow)||r.postMessage({type:"code-action",code:e}),null==(a=null==(s=n.current)?void 0:s.contentWindow)||a.postMessage({type:"code-action",code:e})}}),e&&jsxRuntimeExports.jsx(LinearProgress,{sx:{position:"fixed",top:0,left:0,width:"100%"}}),jsxRuntimeExports.jsxs(Split,{children:[jsxRuntimeExports.jsx(EditorWrapper,{onRef:e=>{n.current=e}}),jsxRuntimeExports.jsx(PreviewWrapper,{onRef:e=>{o.current=e}})]})]})};"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw-cache.js");const container=document.getElementById("root"),muiCache=createCache({key:"mui",prepend:!0}),tssCache=createCache({key:"tss"}),wrappedApp=jsxRuntimeExports.jsx(CacheProvider,{value:muiCache,children:jsxRuntimeExports.jsx(TssCacheProvider,{value:tssCache,children:jsxRuntimeExports.jsx(ThemeProvider,{theme:THEME_DARK,children:jsxRuntimeExports.jsx(LocalizationProvider,{dateAdapter:AdapterDayjs,adapterLocale:"en-gb",children:jsxRuntimeExports.jsx(LoaderProvider,{initialState:0,children:jsxRuntimeExports.jsx(EZ,{children:jsxRuntimeExports.jsx(Zw,{children:jsxRuntimeExports.jsx(App,{})})})})})})})}),root=createRoot(container);Sa.setValue({WITH_DIRTY_CLICK_LISTENER:!0,WITH_MOBILE_READONLY_FALLBACK:!0,WITH_WAIT_FOR_MOVE_LISTENER:!0,WITH_WAIT_FOR_TOUCH_LISTENER:!0,WITH_DISMOUNT_LISTENER:!0,WITH_SYNC_COMPUTE:!0,CUSTOM_FIELD_DEBOUNCE:800,FIELD_BLUR_DEBOUNCE:50}),pd.setAdjustHeight(25),document.addEventListener("wheel",(()=>{const e=document.activeElement;e&&"number"===e.type&&e.blur()})),root.render(wrappedApp);export{__vite_legacy_guard};
