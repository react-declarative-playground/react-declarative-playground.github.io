function __vite_legacy_guard(){import.meta.url,import("_").catch((()=>1))}import{i as index,W as We,D as Declarative,M as MuiMaterial,a as MuiIcons,c as createTheme,r as reactExports,f as fS,j as jsxRuntimeExports,T as Typography,F as Ft,E as Ek,h as hc,b as hx,B as Box,d as babelExports,e as default_1,P as Pa,w as ww,g as D0,G as Gg,k as wD,O as Oh,l as bI,J as Js,A as AppBar,m as Toolbar,n as Button,p as pS,v as vg,K as KeyboardArrowDown,I as IconButton,o as Dc,q as GitHub,s as Popover,t as MenuItem,u as Pee,x as Jb,$ as $0,y as Ts,z as zme,C as Kme,H as CssBaseline,L as LinearProgress,S as Split,N as createCache,Q as createRoot,R as wa,U as gm,V as CacheProvider,X as TssCacheProvider,Y as ThemeProvider,Z as LocalizationProvider,_ as AdapterDayjs,a0 as See,a1 as pR}from"./vendor-a9d8ba2e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),window.ResizeObserver||(window.ResizeObserver=index),window.React=We,window.Declarative=Declarative,window.MuiMaterial=MuiMaterial,window.MuiIcons=MuiIcons,window.material=MuiMaterial,window.iconsMaterial=MuiIcons;const THEME_DARK=createTheme({breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}},palette:{mode:"dark",primary:{main:"#3F51B5"},secondary:{main:"#F5F8FF"},success:{dark:"#2F6b39",light:"#5fc16d",main:"#38b249"},warning:{dark:"#8D682d",light:"#f7bb57",main:"#f6ab2e"},info:{dark:"#1D4580",light:"#4483df",main:"#1664d8"},error:{dark:"#85372b",light:"#eb6d57",main:"#e6492d"},text:{primary:"#fff",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},background:{default:"#111318",paper:"#1d1f24"}}}),fetchText$1=async e=>{const t=await fetch(e);return await t.text()},codeManager=Ek("react-declarative-playground-code"),Editor=({onChange:e})=>{const t=reactExports.useRef(null),r=reactExports.useRef(null);reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{"code-action"===e.type&&e.code&&r.current(e.code)}))}),[]);const[s]=fS((async()=>{const[e,t,r,s,o]=await Promise.all([fetchText$1("react-declarative.d.ts"),fetchText$1("react.d.ts"),fetchText$1("mui-material.d.ts"),fetchText$1("mui-icons.d.ts"),fetchText$1("code1.txt")]);return{types:e,code:codeManager.getValue()||o,react:t,mui:r,icons:s}}));return s?jsxRuntimeExports.jsx(Ft,{height:"100vh",defaultLanguage:"typescript",theme:"vs-dark",onMount:(o,a)=>{a.languages.typescript.typescriptDefaults.setCompilerOptions({...a.languages.typescript.typescriptDefaults.getCompilerOptions(),jsx:a.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",reactNamespace:"React",target:a.languages.typescript.ScriptTarget.ES2020});const n=a.editor.createModel(s.code,"typescript",a.Uri.file("index.tsx"));o.setModel(n),a.languages.typescript.typescriptDefaults.addExtraLib(s.types,"file:///node_modules/react-declarative/index.d.ts"),a.languages.typescript.typescriptDefaults.addExtraLib(s.react,"file:///node_modules/react/index.d.ts"),a.languages.typescript.typescriptDefaults.addExtraLib(s.mui,"file:///node_modules/@mui/material/index.d.ts"),a.languages.typescript.typescriptDefaults.addExtraLib(s.icons,"file:///node_modules/@mui/icons-material/index.d.ts"),t.current=()=>o.getValue(),r.current=e=>o.setValue(e),e(o.getValue())},onChange:()=>{const r=t.current();codeManager.setValue(r),e(r)}}):jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading editor..."})},[LoaderProvider,useLoaderInternal]=hc(),useLoader=()=>{const[e,t]=useLoaderInternal();return[!!e,reactExports.useCallback((e=>t((t=>t+(e?1:-1)))),[])]},EditorWrapper=({onRef:e})=>{const{elementRef:t,size:r}=hx(),s=reactExports.useMemo((()=>{const e=new URL(location.href,location.origin);return e.searchParams.set("monaco","1"),e.toString()}),[]);return jsxRuntimeExports.jsx(Box,{ref:t,sx:{position:"relative"},children:jsxRuntimeExports.jsx(Box,{ref:e,component:"iframe",frameBorder:"0",sx:{position:"absolute",top:0,left:0,height:r.height,width:r.width},src:s})})};babelExports.registerPlugin("plugin-transform-modules-umd",default_1);const Preview=({onNotify:onNotify})=>{const transpileSubject=Pa(),doTranspile=reactExports.useMemo((()=>ww((([e],[t])=>e!==t),(value=>{let code=null;console.log("Compiling",new Date);try{const e=babelExports.transform(value,{filename:"index.tsx",presets:["env","react","typescript"],plugins:[["plugin-transform-modules-umd",{globals:{react:"React","react-declarative":"Declarative","@mui/material":"MuiMaterial","@mui/icons-material":"MuiIcons"},moduleId:"Executor"}]],parserOpts:{strictMode:!1}});code=e.code}catch(error){return void onNotify(D0(error)||"Invalid syntax")}if(code){try{eval(code)}catch(error){return void onNotify(D0(error)||"Execution failed")}console.log("Compiled",new Date),transpileSubject.next()}else onNotify("Empty code")}))),[]),handleTranspile=reactExports.useMemo((()=>Gg((e=>{doTranspile(e)}),2500)),[]);return reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{"code-action"===e.type&&e.code&&(e.force?(handleTranspile.clear(),doTranspile(e.code)):handleTranspile(e.code))}))}),[handleTranspile]),jsxRuntimeExports.jsx(wD,{sx:{height:"100vh",width:"100vw"},hideOverflowX:!0,children:jsxRuntimeExports.jsx(Oh,{reloadSubject:transpileSubject,onError:e=>onNotify(D0(e)||"Execution failed"),children:jsxRuntimeExports.jsx(bI,{reloadSubject:transpileSubject,children:()=>window.Executor?jsxRuntimeExports.jsx(Js,{fields:window.Executor.fields,data:window.Executor.data,onChange:(e,t)=>!t&&onNotify(JSON.stringify(e,null,2)),sx:{p:1},payload:window.Executor.payload}):jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading preview..."})})})})},PreviewWrapper=({onRef:e})=>{const{elementRef:t,size:r}=hx(),s=reactExports.useMemo((()=>{const e=new URL(location.href,location.origin);return e.searchParams.set("preview","1"),e.toString()}),[]);return jsxRuntimeExports.jsx(Box,{ref:t,sx:{position:"relative"},children:jsxRuntimeExports.jsx(Box,{ref:e,component:"iframe",frameBorder:"0",sx:{position:"absolute",top:0,left:0,height:r.height,width:r.width},src:s})})},fetchText=async e=>{const t=await fetch(e);return await t.text()},itemList=[{url:"code1.txt",label:"Order info"},{url:"code2.txt",label:"Typography"},{url:"code3.txt",label:"Settings page"},{url:"code4.txt",label:"Product Shape"},{url:"code5.txt",label:"Profile card"},{url:"code6.txt",label:"Gallery of controls"},{url:"code7.txt",label:"Variant form"},{url:"code8.txt",label:"Custom JSX"}],Header=({onCode:e})=>{const[t,r]=reactExports.useState(null),s=reactExports.useRef("");reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{"code-action"===e.type&&e.code&&(s.current=e.code)}))}),[]);return jsxRuntimeExports.jsx(AppBar,{position:"relative",sx:{marginBottom:"2px"},children:jsxRuntimeExports.jsxs(Toolbar,{variant:"dense",sx:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",children:"Playground"}),jsxRuntimeExports.jsx(Button,{size:"small",sx:{color:"#fff",ml:2},onClick:async()=>{const t=await pS(".ts");if(!t)return;const r=new FileReader;r.addEventListener("load",(()=>{e(r.result)}),!1),t&&r.readAsText(t)},children:"Open"}),jsxRuntimeExports.jsx(Button,{size:"small",sx:{color:"#fff",ml:1},onClick:()=>{const e=new Blob([s.current]),t=URL.createObjectURL(e);vg(t,"form.assets.ts")},children:"Download"}),jsxRuntimeExports.jsx(Button,{size:"small",endIcon:jsxRuntimeExports.jsx(KeyboardArrowDown,{}),sx:{color:"#fff",ml:1,display:{xs:"none",sm:"flex"}},onClick:({currentTarget:e})=>r(e),children:"Demos"}),jsxRuntimeExports.jsx(Popover,{open:!!t,anchorEl:t,onClose:()=>r(null),anchorOrigin:{horizontal:"left",vertical:"bottom"},children:itemList.map((({label:t,url:s})=>jsxRuntimeExports.jsx(MenuItem,{onClick:async()=>{const t=await fetchText(s);e(t),r(null)},children:t},s)))}),jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx(IconButton,{onClick:()=>Dc("https://github.com/react-declarative/react-declarative"),children:jsxRuntimeExports.jsx(GitHub,{})})]})})},isDevelopment=()=>"development"==={}.CC_NODE_ENV,App=()=>{const[e]=useLoader(),t=Pee(),{isMobile:r}=Jb(),s=$0({title:"Waiting for user input",fields:[{type:Ts.Text,title:"Firstname",defaultValue:"Петр",name:"f"},{type:Ts.Text,title:"Lastname",name:"l"},{type:Ts.Text,title:"Patronymic",name:"p"}]}),o=zme(),a=Kme();reactExports.useEffect((()=>{window.pickOne=s,window.pickDate=o,window.pickTime=a}),[]);const n=reactExports.useRef(null),i=reactExports.useRef(null);reactExports.useEffect((()=>{window.addEventListener("message",(({data:e})=>{var r,s;"code-action"===e.type&&e.code&&(null==(s=null==(r=n.current)?void 0:r.contentWindow)||s.postMessage({type:e.type,code:e.code})),"notify-action"===e.type&&e.notify&&isDevelopment()&&t(e.notify)}))}),[]);const c=reactExports.useMemo((()=>new URL(location.href,location.origin).searchParams.has("monaco")),[]),l=reactExports.useMemo((()=>new URL(location.href,location.origin).searchParams.has("preview")),[]);if(c)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Editor,{onChange:e=>{var t;null==(t=window.top)||t.postMessage({type:"code-action",code:e},"*")}})]});if(l)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Preview,{onNotify:e=>{var t;null==(t=window.top)||t.postMessage({type:"notify-action",notify:e},"*")}})]});return jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",overflow:"hidden",height:"100vh",width:"100vw"},children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(Header,{onCode:e=>{var t,r,s,o;null==(r=null==(t=n.current)?void 0:t.contentWindow)||r.postMessage({type:"code-action",force:!0,code:e}),null==(o=null==(s=i.current)?void 0:s.contentWindow)||o.postMessage({type:"code-action",force:!0,code:e})}}),e&&jsxRuntimeExports.jsx(LinearProgress,{sx:{position:"fixed",top:0,left:0,width:"100%"}}),jsxRuntimeExports.jsx(Split,{direction:r?"vertical":"horizontal",children:r?[jsxRuntimeExports.jsx(PreviewWrapper,{onRef:e=>{n.current=e}}),jsxRuntimeExports.jsx(EditorWrapper,{onRef:e=>{i.current=e}})]:[jsxRuntimeExports.jsx(EditorWrapper,{onRef:e=>{i.current=e}}),jsxRuntimeExports.jsx(PreviewWrapper,{onRef:e=>{n.current=e}})]})]})};"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw-cache.js");const container=document.getElementById("root"),muiCache=createCache({key:"mui",prepend:!0}),tssCache=createCache({key:"tss"}),wrappedApp=jsxRuntimeExports.jsx(CacheProvider,{value:muiCache,children:jsxRuntimeExports.jsx(TssCacheProvider,{value:tssCache,children:jsxRuntimeExports.jsx(ThemeProvider,{theme:THEME_DARK,children:jsxRuntimeExports.jsx(LocalizationProvider,{dateAdapter:AdapterDayjs,adapterLocale:"en-gb",children:jsxRuntimeExports.jsx(LoaderProvider,{initialState:0,children:jsxRuntimeExports.jsx(See,{children:jsxRuntimeExports.jsx(pR,{children:jsxRuntimeExports.jsx(App,{})})})})})})})}),root=createRoot(container);wa.setValue({WITH_DIRTY_CLICK_LISTENER:!0,WITH_MOBILE_READONLY_FALLBACK:!0,WITH_WAIT_FOR_MOVE_LISTENER:!0,WITH_WAIT_FOR_TOUCH_LISTENER:!0,WITH_DISMOUNT_LISTENER:!0,WITH_SYNC_COMPUTE:!0,CUSTOM_FIELD_DEBOUNCE:800,FIELD_BLUR_DEBOUNCE:50}),gm.setAdjustHeight(25),document.addEventListener("wheel",(()=>{const e=document.activeElement;e&&"number"===e.type&&e.blur()})),root.render(wrappedApp);export{__vite_legacy_guard};
